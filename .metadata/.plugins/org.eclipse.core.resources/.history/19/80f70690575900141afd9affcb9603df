\section{Bounce bounce}

\subsection{A FIR filter based echo of 30ms}
has the equation:
\begin{equation}
y[n] = x[n] + \alpha x[n - delay_s]
\end{equation}
Where $x[n]$ is the input, $y[n]$ the output, $\alpha$ is some dampening
coefficient and $delay_s$ is the delay in number of samples
corresponding in a delay of $delay$ seconds, where
\begin{equation}
delay_s = \mbox{round}(f_s \cdot delay )
\end{equation}
and $f_s$ is the sampling frequency.

This gives the transfer function:
\begin{equation}
H(z) = \frac{1 + \alpha z^{-delay_s}}{ 1 }
\end{equation}

In matlab we can calculate the $b$ coefficients:
\begin{lstlisting}[
style=Matlab-editor,
basicstyle=\ttfamily\footnotesize,
numbers=none]
b = [1; zeros(delayZ-1,1); alpha];
\end{lstlisting}

Impulse response for a FIR based delay with $delay = 30\mbox{ms}, ~ \alpha =
0.6$ is simulated. Plots showing the initial impulse and the delayed and dampend
echo is shown in figure~\ref{fig:fir30imp}. Frequency response can be seen in
figure~\ref{fig:fir30freq}.


\stdfignoscale{firDelay30imp.eps}{Impulse response of a 30ms
echo implemented with a FIR filter}{fig:fir30imp}
\stdfignoscale{firDelay30freq.eps}{Frequency response of a 30ms
echo implemented with a FIR filter}{fig:fir30freq}

\subsection{A IIR filter based echo of 30ms}
has the equation:
\begin{gather*}
y[n] + \alpha y[n - delay_s]= x[n] \\
\Updownarrrow\\
y[n] = x[n] - \alpha y[n - delay_s]
\end{gather*}

This gives the transfer function:
\begin{equation}
H(z) = \frac{1}{1 + -\alpha z^{-delay_s}}
\end{equation}

In matlab we can calculate the $a$ coefficients:
\begin{lstlisting}[
style=Matlab-editor,
basicstyle=\ttfamily\footnotesize,
numbers=none]
a = [1; zeros(delayZ-1,1); -alpha];
\end{lstlisting}

Impulse response for an IIR based delay with $delay = 30\mbox{ms}, ~ \alpha =
0.6$ is simulated. Plots showing the initial impulse and the delayed and dampend
echo is shown in figure~\ref{fig:iir30imp}. Frequency response can be seen in
figure~\ref{fig:iir30freq}.


\stdfignoscale{iirDelay30imp.eps}{Impulse response of a 30ms
echo implemented with a IIR filter}{fig:iir30imp}
\stdfignoscale{iirDelay30freq.eps}{Frequency response of a 30ms
echo implemented with a IIR filter}{fig:iir30freq}